<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>asr.grammar documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Asr</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="intro.html"><div class="inner"><span>Introduction to asr</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>asr</span></div></div></li><li class="depth-2 branch"><a href="asr.asr.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>asr</span></div></a></li><li class="depth-2 branch"><a href="asr.autospecs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>autospecs</span></div></a></li><li class="depth-2 branch"><a href="asr.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="asr.data.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>data</span></div></a></li><li class="depth-2 branch current"><a href="asr.grammar.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>grammar</span></div></a></li><li class="depth-2 branch"><a href="asr.parsed.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>parsed</span></div></a></li><li class="depth-2 branch"><a href="asr.specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>specs</span></div></a></li><li class="depth-2"><a href="asr.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="asr.grammar.html#var-asdl-grammar"><div class="inner"><span>asdl-grammar</span></div></a></li><li class="depth-1"><a href="asr.grammar.html#var-asdl-parser"><div class="inner"><span>asdl-parser</span></div></a></li><li class="depth-1"><a href="asr.grammar.html#var-asr-pre-spec"><div class="inner"><span>asr-pre-spec</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">asr.grammar</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-asdl-grammar"><h3>asdl-grammar</h3><div class="usage"></div><div class="doc"><pre class="plaintext">## Instaparse Grammar for ASDL

We'll parse the ASDL spec for ASR into Clojure vectors and
hashmaps, then generate clojure.specs for terms and forms from
the vectors and hashmaps.

The only thing less-than-obvious in the following grammar are
angle brackets. They mean "don't bother reporting this term."
Cuts down on clutter in the output.

The grammar says:

1. An ASDL spec is a bunch of ***productions*** or ASDL-DEFs

2. An ASDL-DEF, aka ***speclet***, is a triple of (a) ***term***
or ASDL-TERM, (b) an equals sign, and (c) one or more ASDL-FORMs
separated by vertical bar characters. The meaning of an ASDL-DEF
is an *alternation*, a list of alternative ASDL-FORMs.

There are about 28 terms. See all-terms-test in core_test.clj.
They are things like ::array_index, ::ttype, ::expr, etc.

3. There are three *kinds* of ASDL-FORM or speclet: a
***composite***, a ***symconst***, or a ***tuple***.

4. A *composite* is a ASDL-HEAD ***head*** followed by
ASDL-ARGSs args. Args are identical in shape to a tuple.

There are about 227 heads, about six of which are asr-tuples
with gensymmed names. They are things like ::GetPointer,
::FileClose, ::TypeParameter, etc. See all-heads-test in
core_test.clj.

5. A *symconst* is just an identifier, reckoned as the *head* of
the symconst.

6. A tuple is a comma-separated list (in round brackets) of
pairs of ***type*** and ***variable***.

A tuple is anonymous, but we gensym a *head* for them, so that
every kind of ASDL-FORM has a head, for convenience.

7. Types can have *quantitative qualifiers*, aka
*multiplicities*: STAR or QUES, meaning that the variable
denotes "zero or more" and "at least one" instance of the
type respectively. The default quantity is "exactly once."

The big picture to remember about *terms* and *heads* is that a
*speclet* looks like one of the following three:

1. `term` `=` `composite-`*`head`*`-1` `args` `|`
`composite-`*`head`*`-2` `args` `|` ...

2. `term` `=` `symconst-`*`head`* `|` `symconst-`*`head`* `|`
...

3. `term` `=` `tuple` (anonymous gensymmed *head*)

A *term* corresponds to one or more (a *bunch* of) *heads*, but
each head corresponds to exactly one term.

A term has exactly one *speclet*. The speclet is the whole line,
left-hand side (term) and right-hand side (bunch of *forms*, one
per head).

All forms in a speclet have the same kind: composite, symconst,
or tuple. There won't be a mixture of composites and symconsts,
for instance, on the right-hand side of any term.

In addition to the 3 kinds, it turns out there are about 28
terms and speclets, and 227 heads, forms, and clojure.specs when
we're done. The number grows slowly as we add features to ASR.
</pre></div></div><div class="public anchor" id="var-asdl-parser"><h3>asdl-parser</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-asr-pre-spec"><h3>asr-pre-spec</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Capture the parse of ASR.asdl into hiccup format
**(**&lt;<a href="https://github.com/weavejester/hiccup&gt;">https://github.com/weavejester/hiccup&gt;</a>;**).** </pre></div></div></div></body></html>